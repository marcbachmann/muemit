!function(){function t(){this._events={}}function e(t,e,r){n(e),this._events||(this._events={}),this._events[t]||(this._events[t]=[]),this._events[t].push({listener:e,once:r})}function n(t){if("function"!=typeof t)throw new TypeError("listener must be a function")}function r(t){return i(t,function(t){return t.listener})}function i(t,e,n){if(!t)return[];var r,i=[];if("[object Array]"===Object.prototype.toString.call(t))for(var s=t.length-1;s>=0;s--)r=e.call(n,t[s]),r&&i.push(r);else for(s in t)r=e.call(n,t[s]),r&&i.push(r);return i}t.listenerCount=function(t,e){return t.listeners(e).length},t.prototype.on=t.prototype.addListener=function(t,n){return e.call(this,t,n),this},t.prototype.once=function(t,n){return e.call(this,t,n,!0),this},t.prototype.emit=function(t){if(!this._events)return!1;var e=Array.prototype.slice.call(arguments,1),n=this._events[t]||[];if(0===n.length){if("error"!==t)return!1;var r=e[0];if(r instanceof Error)throw r;var s=new Error('Uncaught, unspecified "error" event.'+(r?" ("+r+")":""));throw s.context=r,s}return this._events[t]=i(n,function(t){return t.listener.apply(t.listener,e),t.once!==!0?t:void 0}),!0},t.prototype.listeners=function(t){return this._events?t?r.call(this,this._events[t]):[].concat.apply([],i(this._events,r,this)):[]},t.prototype.removeListener=function(t,e){return n(e),this._events&&(this._events[t]=(this._events[t]||[]).filter(function(t){return t.listener!==e})),this},t.prototype.removeAllListeners=function(t){return this._events&&t?this._events[t]=[]:this._events={},this},module.exports=t}();
